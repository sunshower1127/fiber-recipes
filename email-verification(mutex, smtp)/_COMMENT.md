# email-verification

굉장히 도움이 많이 된 예제입니다

## 의존성 주입

보면 이제 함수 인자로 인터페이스 의존성을 받고,
실제 인스턴스는 따로 구현해서
순회 문제가 발생하지 않게... 했나?
암튼 한 번에 이해하기는 힘든데
이게 비즈니스 로직이다 이거죠

---

## smtp

간단하게 smtp 예제 볼 수 있었음.
auth도 그냥 앱 비밀번호만 구글페이지에서 가져오면 됨

---

## verification code 로직

일단 저장해야할 저장소는 그냥 메모리 저장소를 쓰기로 했는데
그냥 map에다가 저장하는게 아니라
map에다 mutex를 달아서 저장하네요.
원래는 서버가 참조하는 데이터는 무조건 동시성 제어를 해야함.
그게 싫다면? redis 쓰던가 아니면 db쓰던가

암튼 code 저장할때도 보안 이슈가 있을 수 있으니깐 해쉬화해서 비교하고,

코드는 어떻게 만드냐? 그냥 cryto.rand로 3바이트 랜덤값 만들고
그거 hex string으로 변환하면? -> 6자리 코드 완성
어차피 유효기간이 몇분되니깐, 2^24 정도면 10^6 -> 천만이니깐 몇분안에 천만개면 오케이죠 뭐
인간이 7개 이상은 한 번에 외우기 힘드니깐 그냥 6자리? 오케이

---
